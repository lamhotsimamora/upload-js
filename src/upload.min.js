/*
* Written by Lamhot Simamora
* 2019
*/
class Upload{constructor(t){return t&&(this.el=t.el,this.url=t.url,this.token=t.token,this.data=t.data,this.form=new FormData),this.request_method="POST",this.string_token="_token",this.string_data="_data",this.info_files=[],this}start(t=null){if(this.el.length)try{for(var e=[],s=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHttp"),i=0;i<=this.el.length-1;i++){var n=document.getElementById(this.el[i]),o=n.getAttribute("name");if(n.files[0]){this.form.append(o,n.files[0]);var r={file_name:n.files[0].name,file_size:n.files[0].size,file_type:n.files[0].type};e[i]=r}}this.info_files=e,this.form.append(this.string_token,this.token),this.form.append(this.string_data,this.data),s.open(this.request_method,this.url),s.onreadystatechange=function(e){4==this.readyState&&200==this.status&&(null!=t?t(this.responseText,e):console.error("upload.js -> You have to use callback function !"))},s.send(this.form)}catch(t){console.error("upload.js -> "+t)}else console.log("Element should be collecting in array !");return this}get information(){return this.info_files}}